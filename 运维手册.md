# 舟山定海渔港雷达监控系统 V2.0
## 运维操作手册

---

## 目录

1. [环境要求](#1-环境要求)
2. [安装部署](#2-安装部署)
3. [配置说明](#3-配置说明)
4. [日常操作](#4-日常操作)
5. [故障排查](#5-故障排查)
6. [性能监控](#6-性能监控)

---

## 1. 环境要求

### 1.1 硬件要求

| 项目 | 最低配置 | 推荐配置 |
|------|----------|----------|
| CPU | Intel i5 / AMD Ryzen 5 | Intel i7 |
| 内存 | 8GB | 16GB |
| 存储 | 50GB | 100GB SSD |
| 网络 | 100Mbps | 1000Mbps |

### 1.2 操作系统

- ✅ Windows 10/11 (64位)
- ✅ Ubuntu 20.04+
- ✅ Mac (开发测试)

### 1.3 Python版本

```
Python 3.8 - 3.11
```

检查命令：
```bash
python --version
```

---

## 2. 安装部署

### 2.1 步骤一：安装Python

**Windows：**
1. 下载 Python 3.11：https://www.python.org/downloads/
2. 安装时勾选 "Add Python to PATH"
3. 验证：`python --version`

**Ubuntu：**
```bash
sudo apt update
sudo apt install python3 python3-pip
```

### 2.2 步骤二：安装依赖

```bash
# 进入项目目录
cd radar_system_v2

# 安装依赖（Windows PowerShell或终端）
pip install -r requirements.txt

# 或者逐个安装
pip install flask flask-socketio pynmea2 pyserial numpy
```

### 2.3 步骤三：配置网络

编辑 `config/config.json`：

```json
{
    "radar": {
        "connection": {
            "ip": "192.168.1.100",  // 雷达IP地址
            "port": 2000
        }
    },
    "ais": {
        "connection": {
            "port": "COM3",  // AIS串口
            "baudrate": 38400
        }
    }
}
```

**注意：**
- 雷达IP需要根据实际雷达机器IP修改
- AIS串口在Windows上是COM3，在Linux上是/dev/ttyUSB0

### 2.4 步骤四：启动系统

```bash
# 模拟器模式（测试用）
python main.py --simulator

# 正常模式（连接真实雷达）
python main.py
```

---

## 3. 配置说明

### 3.1 雷达配置

| 参数 | 说明 | 示例值 |
|------|------|--------|
| ip | 雷达IP地址 | 192.168.1.100 |
| port | 雷达端口 | 2000 |
| protocol | 协议 | TCP |

### 3.2 AIS配置

| 参数 | 说明 | 示例值 |
|------|------|--------|
| port | 串口 | COM3 |
| baudrate | 波特率 | 38400 |

### 3.3 算法配置

```json
{
    "fusion": {
        "tracker": "KF",
        "weather_mode": "moderate"
    }
}
```

**可选算法：** KF, EKF, UKF, PF

**推荐：** KF（最稳定）

---

## 4. 日常操作

### 4.1 启动系统

```bash
python main.py
```

### 4.2 停止系统

按 `Ctrl + C`

### 4.3 查看日志

```bash
# Windows
type logs\radar_system.log

# Linux/Mac
tail -f logs/radar_system.log
```

### 4.4 访问Web界面

打开浏览器：
```
http://localhost:8081
```

---

## 5. 故障排查

### 5.1 常见问题

| 问题 | 原因 | 解决方法 |
|------|------|----------|
| 无法启动 | 依赖未安装 | `pip install -r requirements.txt` |
| 雷达连接失败 | IP错误 | 检查config.json中IP |
| AIS无数据 | 串口错误 | 检查COM口是否正确 |
| Web无法访问 | 端口被占用 | 更改端口或关闭占用程序 |

### 5.2 网络检测

```bash
# 测试雷达连接
ping 192.168.1.100

# 测试端口
telnet 192.168.1.100 2000
```

### 5.3 端口检测

```bash
# Windows
netstat -ano | findstr :8081

# Linux
netstat -tuln | grep 8081
```

---

## 6. 性能监控

### 6.1 查看性能

访问：`http://localhost:8081/api/performance`

返回JSON：
```json
{
    "latency": {"avg_ms": 10.5},
    "memory": {"current_mb": 150},
    "health": {"status": "healthy"}
}
```

### 6.2 健康状态

- **healthy** - 正常
- **warning** - 警告
- **critical** - 严重

---

## 快速检查清单

启动前检查：

- [ ] Python已安装 (`python --version`)
- [ ] 依赖已安装 (`pip list`)
- [ ] 配置文件正确（IP、端口）
- [ ] 网络连通（ping雷达IP）
- [ ] 端口可用

---

## 联系支持

如遇问题，请联系：
- 维护人员：XXX
- 电话：XXX-XXXXXXX

---

**版本：V2.0**
**更新日期：2026-02-24**
